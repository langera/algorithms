apply plugin: "idea"
apply plugin: "groovy"

repositories {
    mavenCentral()
    maven { url 'http://oss.sonatype.org/content/repositories/snapshots/' }
}

version = '0.1'
jar {
    manifest {
        attributes 'Implementation-Title': 'spock-freud', 'Implementation-Version': version
    }
}


idea.project.ipr {
    withXml { provider ->
        provider.node.component.find { it.@name == 'VcsDirectoryMappings' }.mapping.@vcs = 'Git'
    }
}

dependencies {
    groovy "org.codehaus.groovy:groovy-all:2.+"
    testCompile "org.spockframework:spock-core:0.7-groovy-2.0"
    testCompile 'cglib:cglib-nodep:2.2'
    testCompile 'org.objenesis:objenesis:1.2'
    testCompile fileTree('resources')
}

idea.module.iml {
    whenMerged { project ->
        project.dependencies.add(
                new org.gradle.plugins.ide.idea.model.ModuleLibrary(
                        [new org.gradle.plugins.ide.idea.model.Path('file://$MODULE_DIR$/src/test/resources')], [], [], [], 'TEST'))
    }
}
